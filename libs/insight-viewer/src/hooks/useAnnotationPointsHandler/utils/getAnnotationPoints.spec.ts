import type { PolygonAnnotation, Point } from '../../../types'
import { getAnnotationPoints } from './getAnnotationPoints'

describe('getAnnotationPoints', () => {
  it('should return correct point with getAnnotationEditingPoints', () => {
    const MOCK_SELECTED_POLYGON_ANNOTATION: PolygonAnnotation = {
      id: 1,
      labelPosition: [184.28571428571422, 153.05142857142857],
      lineWidth: 1.5,
      type: 'polygon',
      points: [
        [175.54285714285712, 137.7028571428571],
        [174.81142857142856, 136.97142857142856],
        [174.07999999999998, 136.97142857142856],
        [173.3485714285714, 136.97142857142856],
        [172.61714285714285, 136.97142857142856],
        [171.1542857142857, 136.97142857142856],
        [168.22857142857143, 136.97142857142856],
        [165.30285714285714, 136.97142857142856],
        [161.64571428571426, 137.7028571428571],
        [158.72, 139.89714285714282],
        [156.5257142857143, 143.5542857142857],
        [155.7942857142857, 150.13714285714286],
        [155.06285714285713, 159.64571428571426],
        [155.06285714285713, 171.3485714285714],
        [155.7942857142857, 182.32],
        [157.98857142857142, 192.55999999999997],
        [161.64571428571426, 201.33714285714282],
        [167.49714285714285, 209.38285714285712],
        [173.3485714285714, 217.42857142857142],
        [180.66285714285712, 224.7428571428571],
        [188.70857142857142, 231.32571428571427],
        [198.21714285714285, 238.64],
        [209.1885714285714, 243.75999999999996],
        [220.89142857142855, 248.1485714285714],
        [235.51999999999998, 252.53714285714284],
        [248.68571428571425, 254.73142857142855],
        [263.3142857142857, 255.4628571428571],
        [280.1371428571428, 255.4628571428571],
        [296.2285714285714, 251.07428571428568],
        [313.7828571428571, 242.29714285714283],
        [331.3371428571428, 229.13142857142856],
        [343.77142857142854, 217.42857142857142],
        [352.5485714285714, 207.92],
        [358.4, 199.1428571428571],
        [362.7885714285714, 191.09714285714284],
        [365.71428571428567, 182.32],
        [367.1771428571428, 172.07999999999998],
        [367.1771428571428, 163.3028571428571],
        [365.71428571428567, 154.52571428571426],
        [362.7885714285714, 147.21142857142854],
        [358.4, 142.09142857142857],
        [351.8171428571428, 136.97142857142856],
        [344.5028571428571, 131.85142857142856],
        [336.4571428571428, 128.19428571428568],
        [330.60571428571427, 125.26857142857142],
        [325.48571428571427, 123.80571428571427],
        [321.09714285714284, 123.07428571428571],
        [316.7085714285714, 122.34285714285713],
        [313.7828571428571, 122.34285714285713],
        [310.85714285714283, 122.34285714285713],
        [307.9314285714285, 122.34285714285713],
        [306.4685714285714, 122.34285714285713],
        [305.00571428571425, 122.34285714285713],
      ],
    }

    const MOCK_PREV_POINTS: Point[] = [
      [175.54285714285712, 137.7028571428571],
      [174.81142857142856, 136.97142857142856],
      [174.07999999999998, 136.97142857142856],
      [173.3485714285714, 136.97142857142856],
      [172.61714285714285, 136.97142857142856],
      [171.1542857142857, 136.97142857142856],
      [168.22857142857143, 136.97142857142856],
      [165.30285714285714, 136.97142857142856],
      [161.64571428571426, 137.7028571428571],
      [158.72, 139.89714285714282],
      [156.5257142857143, 143.5542857142857],
      [155.7942857142857, 150.13714285714286],
      [155.06285714285713, 159.64571428571426],
      [155.06285714285713, 171.3485714285714],
      [155.7942857142857, 182.32],
      [157.98857142857142, 192.55999999999997],
      [161.64571428571426, 201.33714285714282],
      [167.49714285714285, 209.38285714285712],
      [173.3485714285714, 217.42857142857142],
      [180.66285714285712, 224.7428571428571],
      [188.70857142857142, 231.32571428571427],
      [198.21714285714285, 238.64],
      [209.1885714285714, 243.75999999999996],
      [220.89142857142855, 248.1485714285714],
      [235.51999999999998, 252.53714285714284],
      [248.68571428571425, 254.73142857142855],
      [263.3142857142857, 255.4628571428571],
      [280.1371428571428, 255.4628571428571],
      [296.2285714285714, 251.07428571428568],
      [313.7828571428571, 242.29714285714283],
      [331.3371428571428, 229.13142857142856],
      [343.77142857142854, 217.42857142857142],
      [352.5485714285714, 207.92],
      [358.4, 199.1428571428571],
      [362.7885714285714, 191.09714285714284],
      [365.71428571428567, 182.32],
      [367.1771428571428, 172.07999999999998],
      [367.1771428571428, 163.3028571428571],
      [365.71428571428567, 154.52571428571426],
      [362.7885714285714, 147.21142857142854],
      [358.4, 142.09142857142857],
      [351.8171428571428, 136.97142857142856],
      [344.5028571428571, 131.85142857142856],
      [336.4571428571428, 128.19428571428568],
      [330.60571428571427, 125.26857142857142],
      [325.48571428571427, 123.80571428571427],
      [321.09714285714284, 123.07428571428571],
      [316.7085714285714, 122.34285714285713],
      [313.7828571428571, 122.34285714285713],
      [310.85714285714283, 122.34285714285713],
      [307.9314285714285, 122.34285714285713],
      [306.4685714285714, 122.34285714285713],
      [305.00571428571425, 122.34285714285713],
    ]
    const MOCK_CURRENT_POTINS: Point[] = [
      [176.2742857142857, 137.7028571428571],
      [175.54285714285714, 136.97142857142856],
      [174.81142857142856, 136.97142857142856],
      [174.07999999999998, 136.97142857142856],
      [173.34857142857143, 136.97142857142856],
      [171.88571428571427, 136.97142857142856],
      [168.96, 136.97142857142856],
      [166.03428571428572, 136.97142857142856],
      [162.37714285714284, 137.7028571428571],
      [159.45142857142858, 139.89714285714282],
      [157.25714285714287, 143.5542857142857],
      [156.5257142857143, 150.13714285714286],
      [155.7942857142857, 159.64571428571426],
      [155.7942857142857, 171.3485714285714],
      [156.5257142857143, 182.32],
      [158.72, 192.55999999999997],
      [162.37714285714284, 201.33714285714282],
      [168.22857142857143, 209.38285714285712],
      [174.07999999999998, 217.42857142857142],
      [181.3942857142857, 224.7428571428571],
      [189.44, 231.32571428571427],
      [198.94857142857143, 238.64],
      [209.92, 243.75999999999996],
      [221.62285714285713, 248.1485714285714],
      [236.25142857142856, 252.53714285714284],
      [249.41714285714284, 254.73142857142855],
      [264.04571428571427, 255.4628571428571],
      [280.8685714285714, 255.4628571428571],
      [296.96, 251.07428571428568],
      [314.5142857142857, 242.29714285714283],
      [332.0685714285714, 229.13142857142856],
      [344.5028571428571, 217.42857142857142],
      [353.28, 207.92],
      [359.13142857142856, 199.1428571428571],
      [363.52, 191.09714285714284],
      [366.44571428571425, 182.32],
      [367.9085714285714, 172.07999999999998],
      [367.9085714285714, 163.3028571428571],
      [366.44571428571425, 154.52571428571426],
      [363.52, 147.21142857142854],
      [359.13142857142856, 142.09142857142857],
      [352.5485714285714, 136.97142857142856],
      [345.2342857142857, 131.85142857142856],
      [337.1885714285714, 128.19428571428568],
      [331.33714285714285, 125.26857142857142],
      [326.21714285714285, 123.80571428571427],
      [321.8285714285714, 123.07428571428571],
      [317.44, 122.34285714285713],
      [314.5142857142857, 122.34285714285713],
      [311.5885714285714, 122.34285714285713],
      [308.6628571428571, 122.34285714285713],
      [307.2, 122.34285714285713],
      [305.7371428571428, 122.34285714285713],
    ]
    const MOCK_CURRENT_POINT: Point = [282.33142857142855, 199.1428571428571]
    const MOCK_EDIT_POINT: Point = [281.59999999999997, 199.1428571428571]

    expect(
      getAnnotationPoints({
        mode: 'polygon',
        isEditing: true,
        point: MOCK_CURRENT_POINT,
        prevPoints: MOCK_PREV_POINTS,
        editMode: 'move',
        editStartPoint: MOCK_EDIT_POINT,
        selectedAnnotation: MOCK_SELECTED_POLYGON_ANNOTATION,
      })
    ).toStrictEqual(MOCK_CURRENT_POTINS)
  })
  it('should return correct point with getAnnotaitonDrawingPoints', () => {
    const MOCK_PREV_POINTS: Point[] = [
      [10, 10],
      [20, 20],
      [30, 30],
      [40, 40],
    ]
    const MOCK_CURRENT_POINT: Point = [100, 100]

    expect(
      getAnnotationPoints({
        mode: 'polygon',
        isEditing: true,
        point: MOCK_CURRENT_POINT,
        prevPoints: MOCK_PREV_POINTS,
        editMode: 'move',
        editStartPoint: null,
        selectedAnnotation: null,
      })
    )
  })
})
